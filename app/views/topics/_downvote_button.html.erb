<% if signed_in? %>
  <% if vote = current_user.topic_downvotes.find_by_link_id_and_topic_id(link.id, @topic.id) %>
    <%= form_for vote, :html => { :method => :delete }, remote: true do |f| %>
      <%= f.submit "downvoted", class: "undo-butn "%>
    <% end %>
  <% else %>
    <%= form_for current_user.topic_downvotes.build, url: topic_downvotes_path(link: link, topic: @topic.id), remote: true do |f| %>
      <%= f.hidden_field :user_id %>
      <%= f.submit "downvote", class: "butn" %>
    <% end %>
  <% end %>
<% end %>
